"use strict";

function testWebP(e) {
  var t = new Image();
  t.onload = t.onerror = function () {
    e(2 == t.height);
  }, t.src = "data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";
}

testWebP(function (e) {
  1 == e ? document.querySelector("body").classList.add("webp") : document.querySelector("body").classList.add("no-webp");
});
var allSlides = document.querySelectorAll(".slider__item"),
    leftBtn = document.querySelector(".slider__btn-left"),
    rightBtn = document.querySelector(".slider__btn-right"),
    allMiniPictures = document.querySelectorAll(".slider__mini-pic");
leftBtn.addEventListener("click", function () {
  moveSlideFromBtn(-1);
}), rightBtn.addEventListener("click", function () {
  moveSlideFromBtn(1);
});

var _loop = function _loop(e) {
  allMiniPictures[e].addEventListener("click", function () {
    moveSlideFromPic(e);
  });
};

for (var e = 0; e < allMiniPictures.length; e++) {
  _loop(e);
}

function moveSlideFromBtn(e) {
  var t = findCurrentSlide();
  (t < 3 && 1 == e || t > 0 && -1 == e) && (t += e), checkAvailabilityButtons(t), displayRightSlide(t);
}

function moveSlideFromPic(e) {
  checkAvailabilityButtons(e), displayRightSlide(e);
}

function findCurrentSlide() {
  for (var _e = 0; _e < allSlides.length; _e++) {
    if (!allSlides[_e].classList.contains("slider__item-opacity")) return _e;
  }
}

function checkAvailabilityButtons(e) {
  0 == e ? (leftBtn.setAttribute("disabled", ""), rightBtn.removeAttribute("disabled", "")) : e == allSlides.length - 1 ? (leftBtn.removeAttribute("disabled", ""), rightBtn.setAttribute("disabled", "")) : (leftBtn.removeAttribute("disabled", ""), rightBtn.removeAttribute("disabled", ""));
}

function displayRightSlide(e) {
  for (var t = 0; t < allSlides.length; t++) {
    e == t ? allSlides[t].classList.remove("slider__item-opacity") : allSlides[t].classList.add("slider__item-opacity");
  }
}

var allTabs = document.querySelectorAll(".product-description__control-block button"),
    charactersBlock = document.querySelector(".characters-block"),
    feedbackBlock = document.querySelector(".feedback"),
    contactBlock = document.querySelector(".contact"),
    arrOfBlocks = [charactersBlock, feedbackBlock, contactBlock];

var _loop2 = function _loop2(_e2) {
  allTabs[_e2].addEventListener("click", function () {
    changeColorButtons(_e2), displaySelectSection(_e2);
  });
};

for (var _e2 = 0; _e2 < allTabs.length; _e2++) {
  _loop2(_e2);
}

function displaySelectSection(e) {
  for (var t = 0; t < arrOfBlocks.length; t++) {
    arrOfBlocks[t].style.display = t == e ? "block" : "none";
  }
}

function changeColorButtons(e) {
  for (var t = 0; t < allTabs.length; t++) {
    t == e ? allTabs[t].classList.add("product-description__btn-active") : allTabs[t].classList.remove("product-description__btn-active");
  }
}

var feedbackOpenBtn = document.querySelector(".feedback__send-btn"),
    modalBackground = document.querySelector(".modal"),
    modalFeedbackWindow = document.querySelector(".feed-window"),
    feedbackSendBtn = document.querySelector(".feed-window__send-btn"),
    feedbackCloseBtn = document.querySelector(".feed-window__close-btn");

function displayModalWindow() {
  modalBackground.style.display = "flex", modalBackground.style.animationName = "visible", modalBackground.style.animationPlayState = "running", modalFeedbackWindow.style.display = "flex", modalFeedbackWindow.style.animationName = "visible", modalFeedbackWindow.style.animationPlayState = "running";
}

function hideModalWindow() {
  modalBackground.style.animationName = "hidden", setTimeout(function () {
    modalBackground.style.display = "none";
  }, 475), modalFeedbackWindow.style.animationName = "hidden", setTimeout(function () {
    modalFeedbackWindow.style.display = "none";
  }, 475);
}

feedbackOpenBtn.addEventListener("click", displayModalWindow), feedbackCloseBtn.addEventListener("click", hideModalWindow);