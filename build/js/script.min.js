"use strict";

function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e13) { throw _e13; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e14) { didErr = true; err = _e14; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function initMap() {
  var e = {
    lat: 59.968368,
    lng: 30.317514
  },
      t = new google.maps.Map(document.querySelector(".contact__map"), {
    zoom: 15,
    center: e
  });
  new google.maps.Marker({
    position: e,
    map: t
  });
}

!function (e) {
  var t = new Image();
  t.onload = t.onerror = function () {
    e(2 == t.height);
  }, t.src = "data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";
}(function (e) {
  1 == e ? document.querySelector("body").classList.add("webp") : document.querySelector("body").classList.add("no-webp");
}), function () {
  var e = document.querySelectorAll(".slider__item"),
      t = document.querySelector(".slider__btn-left"),
      n = document.querySelector(".slider__btn-right"),
      i = document.querySelectorAll(".slider__mini-pic");
  t.addEventListener("click", function () {
    l(-1);
  }), n.addEventListener("click", function () {
    l(1);
  });

  var _loop = function _loop(_e) {
    i[_e].addEventListener("click", function () {
      o(_e);
    });
  };

  for (var _e = 0; _e < i.length; _e++) {
    _loop(_e);
  }

  function l(t) {
    var n = function () {
      for (var _t = 0; _t < e.length; _t++) {
        if (!e[_t].classList.contains("slider__item-opacity")) return _t;
      }
    }();

    (n < 3 && 1 == t || n > 0 && -1 == t) && (n += t), c(n), r(n);
  }

  function o(e) {
    c(e), r(e);
  }

  function c(i) {
    0 == i ? (t.disabled = !0, n.disabled = !1) : i == e.length - 1 ? (t.disabled = !1, n.disabled = !0) : (t.disabled = !1, n.disabled = !1);
  }

  function r(t) {
    for (var _n = 0; _n < e.length; _n++) {
      t == _n ? e[_n].classList.remove("slider__item-opacity") : e[_n].classList.add("slider__item-opacity");
    }
  }
}(), function () {
  var e = document.querySelectorAll(".product-description__control-block button"),
      t = [document.querySelector(".characters-block"), document.querySelector(".feedback"), document.querySelector(".contact")];

  var _loop2 = function _loop2(_t2) {
    e[_t2].addEventListener("click", function () {
      i(_t2), n(_t2);
    });
  };

  for (var _t2 = 0; _t2 < e.length; _t2++) {
    _loop2(_t2);
  }

  function n(e) {
    for (var _n2 = 0; _n2 < t.length; _n2++) {
      t[_n2].style.display = _n2 == e ? "block" : "none";
    }
  }

  function i(t) {
    for (var _n3 = 0; _n3 < e.length; _n3++) {
      _n3 == t ? e[_n3].classList.add("product-description__btn-active") : e[_n3].classList.remove("product-description__btn-active");
    }
  }
}(), function () {
  var e = document.querySelector(".feedback__send-btn"),
      t = document.querySelector(".modal"),
      n = document.querySelector(".feed-window"),
      i = document.querySelector(".feed-window__close-btn"),
      l = document.querySelector(".feed-window__column-one input"),
      o = document.querySelectorAll(".feed-window__column-one input"),
      c = o[0],
      r = o[1],
      d = o[2],
      a = document.querySelector(".feed-window__column-two textarea"),
      s = document.querySelectorAll(".feed-window__rate img");

  function u() {
    t.style.animationName = "hidden", setTimeout(function () {
      t.style.display = "none";
    }, 475), n.style.animationName = "hidden", setTimeout(function () {
      n.style.display = "none";
    }, 475), document.querySelector("body").classList.remove("no-scroll");
  }

  function m() {
    c.value = "", r.value = "", d.value = "", a.value = "", function () {
      for (var _e2 = 0; _e2 < s.length; _e2++) {
        s[_e2].src = "./img/empty.png", s[_e2].previousElementSibling.srcset = "./img/empty.webp", s[_e2].width = 28, s[_e2].height = 28;
      }
    }(), u();
  }

  e.addEventListener("click", function () {
    t.style.display = "flex", t.style.animationName = "visible", t.style.animationPlayState = "running", n.style.display = "flex", n.style.animationName = "visible", n.style.animationPlayState = "running", document.querySelector("body").classList.add("no-scroll"), l.focus();
  }), i.addEventListener("click", function (e) {
    u(), m();
  }), t.addEventListener("click", function (e) {
    e.target != n && (u(), m());
  }), document.addEventListener("keydown", function (e) {
    "Escape" == e.key && (u(), m());
  }), window.modal = {
    cleanFormAfterSendFunc: m
  };
}(), function () {
  var e = document.querySelectorAll(".feed-window__column-one input"),
      t = e[0],
      n = e[1],
      i = e[2],
      l = document.querySelector(".feed-window__column-two textarea"),
      o = document.querySelectorAll(".feed-window__rate img"),
      c = document.querySelector(".feed-window__send-btn"),
      r = document.querySelector(".feedback"),
      d = document.querySelector(".feedback__block"),
      a = document.querySelector(".feedback__modarate-message");
  var s = [{
    id: -1,
    name: "Борис Иванов",
    plus: "мощность, внешний вид",
    minus: "Слабые тормозные колодки (пришлось заменить)",
    comment: "Взяли по трейд-ин, на выгодных условиях у дилера. Стильная внешка и крут по базовым характеристикам. Не думал, что пересяду на китайский автопром, но сейчас гоняю и понимаю, что полностью доволен.",
    rate: 4.5
  }, {
    id: 0,
    name: "Марсель Исмагилов",
    plus: "Cтиль, комфорт, управляемость",
    minus: "Дорогой ремонт и обслуживание",
    comment: "Дизайн отличный, управление просто шикарно, ощущения за рулём такой машины особые. Но ремонт очень дорогой. Пару месяцев назад пришлось менять двигатель. По стоимости вышло как новый автомобиль. Так что, если покупать эту машину, надо быть готовым к большим расходам на обслуживание.",
    rate: 4.5
  }];

  var _loop3 = function _loop3(_e3) {
    o[_e3].addEventListener("click", function (t) {
      u(t, _e3);
    });
  };

  for (var _e3 = 0; _e3 < o.length; _e3++) {
    _loop3(_e3);
  }

  function u(e, t) {
    var n = e.target;

    function i(e) {
      "SOURCE" == e.previousSibling.nodeName && (e.previousSibling.srcset = "./img/full.webp"), e.src = "./img/full.png", e.dataset.rate = "1", e.width = 28, e.height = 28;
    }

    function l(e) {
      "SOURCE" == e.previousSibling.nodeName && (e.previousSibling.srcset = "./img/empty.webp"), e.src = "./img/empty.png", e.dataset.rate = "0", e.width = 28, e.height = 28;
    }

    !function (e) {
      for (var _t3 = 0; _t3 < o.length; _t3++) {
        _t3 < e ? i(o[_t3]) : _t3 > e && l(o[_t3]);
      }
    }(t), 1 == n.dataset.rate ? function (e) {
      "SOURCE" == e.previousSibling.nodeName && (e.previousSibling.srcset = "./img/half.webp");
      e.src = "./img/half.png", e.dataset.rate = "0.5", e.width = 28, e.height = 28;
    }(n) : i(n);
  }

  function m(e) {
    var t = d.cloneNode(!0),
        n = t.children[0],
        i = t.children[1].children[2],
        l = t.children[2].children[2],
        o = t.children[3].children[1],
        c = t.children[4],
        s = t.children[5].children[1],
        u = t.children[6].children[1],
        m = t.children[6].children[2];
    t.classList.remove("feedback__block-hidden"), t.dataset.id = e.id, n.textContent = e.name, i.textContent = e.plus, l.textContent = e.minus, o.textContent = e.comment, c.append(function (e) {
      var t = e,
          n = document.createElement("div");

      for (var _e4 = 0; _e4 < 5; _e4++) {
        var _e5 = document.createElement("picture"),
            _i = document.createElement("source"),
            _l = document.createElement("img");

        _i.type = "image/webp", _l.alt = "star", _l.width = 28, _l.height = 28, _l.classList.add("feedback__red-star"), t >= 1 ? (_i.srcset = "./img/full.webp", _l.src = "./img/full.png", _l.width = 28, _l.height = 28, t -= 1) : .5 == t ? (_i.srcset = "./img/half.webp", _l.src = "./img/half.png", _l.width = 28, _l.height = 28, t -= 1) : (_i.srcset = "./img/empty.webp", _l.src = "./img/empty.png", _l.width = 28, _l.height = 28), _e5.append(_i), _e5.append(_l), n.append(_e5);
      }

      return n.append(function (e) {
        var t = document.createElement("span");
        e > 3 && (t.classList.add("feedback__advice"), t.innerHTML = "Советует");
        return t;
      }(e)), n;
    }(e.rate)), s.addEventListener("click", function (e) {
      !function (e) {
        var t = e.target.parentElement.nextElementSibling,
            n = t.querySelector(".feedback__answer-btn"),
            i = e.target.parentElement.nextElementSibling.children[0];
        t.style.animationName = "expandAnswer", t.style.animationPlayState = "running", t.style.display = "block", i.style.border = "1px solid black", setTimeout(function () {
          n.style.visibility = "visible";
        }, 800);
      }(e);
    }), m.addEventListener("click", function (e) {
      y(e, "close");
    }), u.addEventListener("click", function (e) {
      !function (e) {
        e.preventDefault();
        var t = e.target.parentElement.children[0];
        "" == t.value ? t.style.border = "2px solid red" : (t.style.border = "1px solid black", t.value = "", y(e), a.style.display = "flex", setTimeout(function () {
          a.style.display = "none";
        }, 3e3));
      }(e);
    }), r.append(t);
  }

  function f(e) {
    var t = !1;

    for (var _n4 = 3; _n4 < r.children.length; _n4++) {
      null != e.id && r.children[_n4].dataset.id == e.id && (t = !0);
    }

    return t;
  }

  function p() {
    for (var _e6 = 1; _e6 <= localStorage.length; _e6++) {
      var _t4 = JSON.parse(localStorage.getItem(_e6));

      f(_t4) || m(_t4);
    }
  }

  function y(e, t) {
    var n;
    n = "close" == t ? e.target.parentElement.parentElement.parentElement : e.target.parentElement;
    var i = n.querySelector(".feedback__answer-btn");
    n.style.animationName = "hideAnswer", n.style.animationPlayState = "running", i.style.visibility = "hidden", setTimeout(function () {
      n.style.display = "none";
    }, 900);
  }

  !function () {
    for (var _e7 = 0; _e7 < s.length; _e7++) {
      m(s[_e7]);
    }
  }(), p(), c.addEventListener("click", function () {
    (function () {
      var e,
          n = "1px red solid",
          i = "1px solid rgba(72, 73, 77, 0.2)",
          o = t.previousElementSibling,
          c = l.previousElementSibling;
      "" == t.value && "" == l.value ? (e = !1, r(t, n, o, "visible"), r(l, n, c, "visible")) : "" == t.value ? (e = !1, r(t, n, o, "visible"), r(l, i, c, "hidden")) : "" == l.value ? (e = !1, r(l, n, c, "visible"), r(t, i, o, "hidden")) : (e = !0, r(t, i, o, "hidden"), r(l, i, c, "hidden"));

      function r(e, t, n, i) {
        e.style.border = t, n.style.visibility = i;
      }

      return e;
    })() && (!function () {
      var e = function () {
        var e = {};
        return e.id = localStorage.length + 1, e.name = t.value, e.plus = n.value, e.minus = i.value, e.comment = l.value, e.rate = function () {
          var e = 0;

          for (var _t5 = 0; _t5 < o.length; _t5++) {
            e += Number(o[_t5].dataset.rate);
          }

          return e;
        }(), e;
      }();

      localStorage.setItem(e.id, JSON.stringify(e));
    }(), p(), window.modal.cleanFormAfterSendFunc());
  });
}(), function () {
  var e = document.querySelector(".product-description__control-block"),
      t = e.children,
      n = document.documentElement.clientWidth;
  e.addEventListener("touchstart", function (e) {
    i = e.touches[0].clientX;
  }, !1), e.addEventListener("touchmove", function (e) {
    if (!i) return;
    if (n > 500) return;
    var l = e.touches[0].clientX;

    if (i - l > 0) {
      var _iterator = _createForOfIteratorHelper(t),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var _e8 = _step.value;
          _e8.style.transform = n < 400 ? "translateX(-270px)" : "translateX(-200px)";
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    } else {
      var _iterator2 = _createForOfIteratorHelper(t),
          _step2;

      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var _e9 = _step2.value;
          _e9.style.transform = "translateX(0)";
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
    }

    i = null;
  }, !1);
  var i = null;
}(), function () {
  var e = document.querySelector(".burger"),
      t = document.querySelector(".nav"),
      n = t.children,
      i = document.documentElement.clientWidth;

  function l() {
    var i = e.children[0];
    t.style.height = "200px", setTimeout(function () {
      var _iterator3 = _createForOfIteratorHelper(n),
          _step3;

      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var _e10 = _step3.value;
          _e10.style.display = "inline";
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }
    }, 500), i.classList.replace("burger__dash", "burger__close-btn"), i.innerHTML = "&times;", e.removeEventListener("click", l), e.addEventListener("click", o);
  }

  function o() {
    var i = e.children[0];
    t.style.height = "0", setTimeout(function () {
      var _iterator4 = _createForOfIteratorHelper(n),
          _step4;

      try {
        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
          var _e11 = _step4.value;
          _e11.style.display = "none";
        }
      } catch (err) {
        _iterator4.e(err);
      } finally {
        _iterator4.f();
      }
    }, 500), i.classList.replace("burger__close-btn", "burger__dash"), i.innerHTML = "", e.removeEventListener("click", o), e.addEventListener("click", l);
  }

  e.addEventListener("click", l), function () {
    if (i < 769) {
      t.style.height = "0", setTimeout(function () {
        t.style.transition = "linear 1s";
      }, 500);

      var _iterator5 = _createForOfIteratorHelper(n),
          _step5;

      try {
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
          var _e12 = _step5.value;
          _e12.style.display = "none";
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }
    }
  }(), window.addEventListener("resize", function () {
    window.location.reload();
  });
}();